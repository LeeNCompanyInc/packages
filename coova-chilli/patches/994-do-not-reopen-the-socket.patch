From cb17f0f6e6b00c5988661889d33becdb3cb75302 Mon Sep 17 00:00:00 2001
From: Benjamin Berg <benjamin@sipsolutions.net>
Date: Thu, 3 Dec 2015 15:14:49 +0100
Subject: [PATCH] Do not reopen the socket just because writing would block.
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Reopening the socket will cause incoming packets to be dropped and can
cause a flood of read errors spamming the logging facility and creating
a high peak in the load.

Signed-off-by: Benjamin Berg <benjamin@sipsolutions.net>
Signed-off-by: Ren√© van Weert <r.vanweert@sowifi.com>
---
 src/net.c | 2 --
 1 file changed, 2 deletions(-)

--- a/src/net.c
+++ b/src/net.c
@@ -928,8 +928,6 @@ ssize_t net_write_eth(net_interface *net
     switch (errno) {
     case EWOULDBLOCK:
       syslog(LOG_ERR, "%s: packet dropped due to congestion", strerror(errno));
-      if (!_options.uid)
-	net_reopen(netif);
       break;
 
 #ifdef ENETDOWN
